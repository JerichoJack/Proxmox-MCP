# Enhanced Proxmox MCP Server Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# GENERAL SETTINGS
# =============================================================================

# SSL Certificate Verification (set to true in production)
VERIFY_SSL=false

# Logging Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Lab Configuration Mode
# STANDALONE: Individual nodes, no cluster discovery
# CLUSTERED: Auto-discover cluster nodes from primary
# MIXED: Combination of standalone and clustered nodes
LAB_CONFIGURATION=STANDALONE

# Enable event listeners for real-time monitoring
ENABLE_EVENT_LISTENERS=true

# =============================================================================
# PROXMOX VE NODES
# =============================================================================

# List of PVE node names (comma-separated)
PVE_NODES=pve1,pve2,pve3

# PVE Node 1 Configuration
PVE1_HOST=192.168.1.10
PVE1_USER=root
PVE1_TOKEN_NAME=mcp-server
PVE1_TOKEN_VALUE=your-pve1-token-here

# PVE Node 2 Configuration  
PVE2_HOST=192.168.1.11
PVE2_USER=root
PVE2_TOKEN_NAME=mcp-server
PVE2_TOKEN_VALUE=your-pve2-token-here

# PVE Node 3 Configuration
PVE3_HOST=192.168.1.12
PVE3_USER=root
PVE3_TOKEN_NAME=mcp-server
PVE3_TOKEN_VALUE=your-pve3-token-here

# =============================================================================
# PROXMOX BACKUP SERVER NODES (Optional)
# =============================================================================

# List of PBS node names (comma-separated)
PBS_NODES=pbs1,pbs2

# PBS Node 1 Configuration
PBS1_HOST=192.168.1.20
PBS1_USER=root
PBS1_TOKEN_NAME=mcp-server
PBS1_TOKEN_VALUE=your-pbs1-token-here

# PBS Node 2 Configuration
PBS2_HOST=192.168.1.21
PBS2_USER=root
PBS2_TOKEN_NAME=mcp-server
PBS2_TOKEN_VALUE=your-pbs2-token-here

# =============================================================================
# CLUSTER DISCOVERY (for CLUSTERED/MIXED modes)
# =============================================================================

# Primary cluster node for auto-discovery
PVE_CLUSTER_PRIMARY_HOST=192.168.1.10
PVE_CLUSTER_PRIMARY_USER=root
PVE_CLUSTER_PRIMARY_TOKEN_NAME=mcp-server
PVE_CLUSTER_PRIMARY_TOKEN_VALUE=your-cluster-token-here

# =============================================================================
# NOTIFICATION OUTPUTS
# =============================================================================

# Discord Notifications
DISCORD_OUT_ENABLED=true
DISCORD_OUT_WEBHOOK_URL=https://discord.com/api/webhooks/1234567890/your-webhook-token-here

# Gotify Notifications
GOTIFY_OUT_ENABLED=true
GOTIFY_OUT_SERVER_URL=https://gotify.example.com
GOTIFY_OUT_APP_TOKEN=your-gotify-app-token-here

# Other notification options (future use)
NTFY_ENABLED=false
NOTIFY_EMAIL_ENABLED=false

# =============================================================================
# EVENT LISTENERS (Optional - for real-time monitoring)
# =============================================================================

# Enabled event listener types (comma-separated)
ENABLED_EVENT_LISTENERS=syslog,discord,gotify

# WebSocket Events
EVENT_WS_ENABLED=false
EVENT_WS_RECONNECT_INTERVAL=30

# Email Events
EVENT_EMAIL_ENABLED=false
EVENT_EMAIL_POLL_INTERVAL=60

# Syslog Events
EVENT_SYSLOG_ENABLED=true
EVENT_SYSLOG_LISTEN_PORT=514
EVENT_SYSLOG_PARSE_FORMAT=proxmox

# Gotify Input (for receiving alerts)
GOTIFY_IN_ENABLED=false
GOTIFY_IN_SERVER_URL=https://gotify.example.com
GOTIFY_IN_CLIENT_TOKEN=your-gotify-client-token
GOTIFY_IN_POLL_INTERVAL=15

# Discord Input (for receiving commands)
DISCORD_IN_ENABLED=false
DISCORD_IN_WEBHOOK_URL=https://discord.com/api/webhooks/input/token
DISCORD_IN_POLL_INTERVAL=30

# =============================================================================
# ENABLED NOTIFIERS
# =============================================================================

# List of enabled notification outputs (comma-separated)
ENABLED_NOTIFIERS=discord,gotify

# =============================================================================
# AGENT SETTINGS (Optional)
# =============================================================================

# Enable AI agent functionality
ENABLE_AGENT=false
AGENT_SERVER_URL=http://localhost:8090

# =============================================================================
# CONFIGURATION NOTES
# =============================================================================

# 1. API Token Creation:
#    - In Proxmox web UI, go to Datacenter > Permissions > API Tokens
#    - Create token with appropriate permissions:
#      * VM.Audit, VM.PowerMgmt for VM operations
#      * Sys.Audit, Sys.PowerMgmt for node operations
#      * Datastore.Audit for storage operations
#      * Pool.Audit for pool information

# 2. Minimum Required Permissions:
#    - PVEAuditor role for read operations
#    - PVEVMAdmin role for VM management
#    - PVESysAdmin role for system operations

# 3. Security Best Practices:
#    - Use dedicated API tokens, not root password
#    - Set token expiration dates
#    - Use minimal required permissions
#    - Enable SSL verification in production
#    - Secure the .env file (chmod 600)

# 4. Network Requirements:
#    - Ports 8006 (PVE) and 8007 (PBS) accessible
#    - HTTPS connectivity to Proxmox nodes
#    - DNS resolution or IP connectivity

# 5. Testing Configuration:
#    - Run: python test_enhanced_server.py
#    - Check connectivity and API functionality
#    - Verify all desired nodes are accessible

# =============================================================================
# EXAMPLE MINIMAL CONFIGURATION
# =============================================================================

# For a simple single-node setup:
# VERIFY_SSL=false
# LAB_CONFIGURATION=STANDALONE
# PVE_NODES=pve1
# PVE1_HOST=192.168.1.10
# PVE1_USER=root
# PVE1_TOKEN_NAME=mcp-server
# PVE1_TOKEN_VALUE=your-token-here
# DISCORD_OUT_ENABLED=false
# GOTIFY_OUT_ENABLED=false